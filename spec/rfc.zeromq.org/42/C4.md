---
domain: rfc.zeromq.org
shortname: 42/К4
name: Контракт Коллективного Конструирования Кода
status: стабильная
editor: Pieter Hintjens <ph@imatix.com>
---

Контракт Коллективного Конструирования Кода - это эволюция модели [Fork + Pull Model](https://help.github.com/articles/about-pull-requests/) сайта github.com, направленная на оптимальную модель совместной работы для свободных программных проектов. Это 2 ревизия спецификации К4 и она заменяет rfc.zeromq.org/22/К4.

## Лицензия

Copyright (c) 2009-2016 Pieter Hintjens.

This Specification is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 3 of the License, or (at your option) any later version.

This Specification is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along with this program; if not, see <http://www.gnu.org/licenses>.

## Содержание

К4 предлагает стандартные процессы для внесения вклада в проект, рассмотрения и обуждения улучшений для программных проектов. Он определяет точные технические требования для проектов как руководство по стилю, модульные тесты, `git` и подобные платформы. К4 специфицирует процесс документирования и обуждения проблем, включая поиск консенсуса и простых описаний, использование "pull request" и систематического просмотра кода.

### Язык

Термины "ДОЛЖНО", "ДОЛЖНА", "ДОЛЖНЫ", "ДОЛЖЕН", "ОБЯЗАТЕЛЬНЫЙ", "ОБЯЗАТЕЛЬНО" (MUST, REQUIRED, SHALL), "НЕ ДОЛЖЕН", НЕ ДОЛЖНА", "НЕ ДОЛЖНЫ" (MUST NOT, SHALL NOT), "РЕКОМЕНДОВАНО" (SHOULD, RECOMMENDED), "НЕ РЕКОМЕНДОВАНО" (SHOULD NOT, NOT RECOMMENDED), "МОГУТ", "МОЖЕТ" (MAY, OPTIONAL) в рамках этого документа ДОЛЖНЫ интерпретироваться в соответствии с RFC 2119[1].

## 1. Цели

К4 предназначен для того, чтобы предоставить многоразовую оптимальную модель для проектов открытого программного обеспечения. Для него определены следующие цели:

1. Максимизировать масштаб и разнообразие сообщества вокруг проекта путём снижения сложности для новых Участников и создания масштабируемой модели участия с сильной положительными обратными связями.
1. Снижение зависимостей от ключевых личностей путём разделения разных наборов навыков таким образом, чтобы был бОльший пул компетенции в любой необходимой области.
1. Возможность для проект развиваться быстрее и точнее за счёт разносторонности процесса принятия решений.
1. Поддерка натурального жизненного цикла версий проекта от экспериментальных до стабильных, с возможностью безопасного экспериментирования, быстрого поиска ошибок и изоляции стабильного кода.
1. Снижение внутренней сложности проектных репозиториев, снижающее тем самым уровень входа для Участников и уменьшающее область поиска ошибок.
1. Улучшить коллективное владение проектом, что повышает экономическую заинтересованность Участников и снижает риск захвата проекта враждебными субъектами.

## 2. Проектирование

### 2.1. Preliminaries

1. Для проекта СЛЕДУЕТ использовать распределённую систему контроля версий git.
1. Проект СЛЕДУЕТ размещать на сайте gitub.com или его эквиваленте, здесь и далее называемом "Платформа".
1. Для проекта СЛЕДУЕТ использовать систему управления проблемами (issue tracker) Платформы
1. Проекту СЛЕДУЕТ иметь чётко прописанные указания к стилю кода.
1. "Участник" - это человек, желающий предоставить набор исправлений для проекта, которые представляют собой набор коммитов, которые решают какую-либо обнаруженную проблему.
1. "Сопровождающий" - это человек, который включает (merges) патчи в репозиторий. Сопровождающие не являются разработчиками; в их задачу входит только управление процессом.
1. Участникам НЕ СЛЕДУЕТ иметь доступ на запись в репозиторий, если только они не являются Сопровождающими.
1. Сопровождающим СЛЕДУЕТ иметь доступ на запись в реапозиторий.
1. Каждый человек без различий и дискриминаций ДОЛЖЕН иметь право стать Участником на основании данного контракта.

### 2.2. Лицензии и Права собственности

1. Проект ДОЛЖЕН использовать share-alike лицензии, такие как MPLv2, или варианты GPLv3 (GPL, LGPL, AGPL).
1. Все добавления в исходный код проекта ("патчи") ДОЛЖНЫ использовать ту же лицензию.
1. Все патчи являются собственностью их авторов. НЕ ДОЛЖНО быть никаких процессов присвоения авторских прав.
1. Каждый Участник ДОЛЖЕН быть отвественен за включение себя в Список Участников.

### 2.3. Требования к патчам

1. Участники и Сопровождающие ДОЛЖНЫ иметь учётную запись на Платформе и ДОЛЖНЫ использовать их реальные имена или известные ники.
1. Патч ДОЛЖЕН быть минимальным и аккуратным решением на одну выявленную и обсуждённую проблему.
1. Патч ДОЛЖЕН соответсвовать указаниям проекта по стилю кода, если такие определены.
1. Патч ДОЛЖЕН следовать указанию по "Эволюции Публичных Контрактов", определённых ниже.
1. Патч НЕ ДОЛЖЕН включать нетривиального кода из других проектов, если только Участник не является автором этого кода.
1. Патч ДОЛЖЕН собираться и проходить внутрипроектное самотестирование как минимум на одной целевой платформе.
1. Коммит-сообщение Патча ДОЛЖНО содержать: короткую (менее 50 симолов) строку, определяющую ту проблему ("Problem: ..."), которая была решена, затем пустую строку и предложенное решение ("Solution: ...").
1. "Корректный Патч" - такой патч, который отвечает перечисленным выше требованиям.

### 2.4. Процесс Разработки

1. Изменения в проекте ДОЛЖНЫ управлятся на основе следующего алгоритма: сначала выделяются проблемы, затем применяется минимальное и точное решение этих проблем.
1. Для того, чтобы запросить изменением, пользователь ДОЛЖЕН создать проблему(issue) на странице проекта на Платформе.
1. В проблеме(issue) Пользователь или Участник ДОЛЖЕН описать проблему, с которой он столкнулся или нашёл.
1. 
1. Change on the project SHALL be governed by the pattern of accurately identifying problems and applying minimal, accurate solutions to these problems.
1. To request changes, a user SHOULD log an issue on the project Platform issue tracker.
1. The user or Contributor SHOULD write the issue by describing the problem they face or observe.
1. The user or Contributor SHOULD seek consensus on the accuracy of their observation, and the value of solving the problem.
1. Users SHALL NOT log feature requests, ideas, suggestions, or any solutions to problems that are not explicitly documented and provable.
1. Thus, the release history of the project SHALL be a list of meaningful issues logged and solved.
1. To work on an issue, a Contributor SHALL fork the project repository and then work on their forked repository.
1. To submit a patch, a Contributor SHALL create a Platform pull request back to the project.
1. A Contributor SHALL NOT commit changes directly to the project.
1. If the Platform implements pull requests as issues, a Contributor MAY directly send a pull request without logging a separate issue.
1. To discuss a patch, people MAY comment on the Platform pull request, on the commit, or elsewhere.
1. To accept or reject a patch, a Maintainer SHALL use the Platform interface.
1. Maintainers SHOULD NOT merge their own patches except in exceptional cases, such as non-responsiveness from other Maintainers for an extended period (more than 1-2 days).
1. Maintainers SHALL NOT make value judgments on correct patches.
1. Maintainers SHALL merge correct patches from other Contributors rapidly.
1. Maintainers MAY merge incorrect patches from other Contributors with the goals of (a) ending fruitless discussions, (b) capturing toxic patches in the historical record, (c) engaging with the Contributor on improving their patch quality.
1. The user who created an issue SHOULD close the issue after checking the patch is successful.
1. Any Contributor who has value judgments on a patch SHOULD express these via their own patches.
1. Maintainers SHOULD close user issues that are left open without action for an uncomfortable period of time.

### 2.5. Branches and Releases

1. The project SHALL have one branch ("master") that always holds the latest in-progress version and SHOULD always build.
1. The project SHALL NOT use topic branches for any reason. Personal forks MAY use topic branches.
1. To make a stable release a Maintainer shall tag the repository. Stable releases SHALL always be released from the repository master.

### 2.6. Evolution of Public Contracts

1. All Public Contracts (APIs or protocols) SHALL be documented.
1. All Public Contracts SHOULD have space for extensibility and experimentation.
1. A patch that modifies a stable Public Contract SHOULD not break existing applications unless there is overriding consensus on the value of doing this.
1. A patch that introduces new features SHOULD do so using new names (a new contract).
1. New contracts SHOULD be marked as "draft" until they are stable and used by real users.
1. Old contracts SHOULD be deprecated in a systematic fashion by marking them as "deprecated" and replacing them with new contracts as needed.
1. When sufficient time has passed, old deprecated contracts SHOULD be removed.
1. Old names SHALL NOT be reused by new contracts.

### 2.7. Project Administration

1. The project founders SHALL act as Administrators to manage the set of project Maintainers.
1. The Administrators SHALL ensure their own succession over time by promoting the most effective Maintainers.
1. A new Contributor who makes correct patches, who clearly understands the project goals, and the process SHOULD be invited to become a Maintainer.
1. Administrators SHOULD remove Maintainers who are inactive for an extended period of time, or who repeatedly fail to apply this process accurately.
1. Administrators SHOULD block or ban "bad actors" who cause stress and pain to others in the project. This should be done after public discussion, with a chance for all parties to speak. A bad actor is someone who repeatedly ignores the rules and culture of the project, who is needlessly argumentative or hostile, or who is offensive, and who is unable to self-correct their behavior when asked to do so by others.

## Further Reading

* [Argyris' Models 1 and 2](http://en.wikipedia.org/wiki/Chris_Argyris) - the goals of C4 are consistent with Argyris' Model 2.

* [Toyota Kata](http://en.wikipedia.org/wiki/Toyota_Kata) - covering the Improvement Kata (fixing problems one at a time) and the Coaching Kata (helping others to learn the Improvement Kata).

## Implementations

* The [ZeroMQ community](http://zeromq.org) uses the C4 process for many projects.
* [OSSEC](http://www.ossec.net/) [uses the C4 process](https://ossec-docs.readthedocs.org/en/latest/development/oRFC/orfc-1.html).
* The [Machinekit](http://www.machinekit.io/) community [uses the C4 process](http://www.machinekit.io/about/).
